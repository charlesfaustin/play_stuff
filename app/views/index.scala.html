@import helper._
@()(implicit request: RequestHeader)

@import helper._

@import views.html.helper.CSRF

@main("Welcome to Play") {

<body> <!--  onload="myFunction()"> -->


 <script type='text/javascript' src='@routes.Assets.at("javascripts/fileupinfo.js")'></script>
  <script type='text/javascript' src='@routes.Assets.at("javascripts/index.js")'></script>
   <script type='text/javascript' src='@routes.Assets.at("javascripts/createdfiles.js")'></script>
   <script type='text/javascript' src='http://rubaxa.github.io/Sortable/Sortable.js'></script>
   <link rel="stylesheet" type="text/css" href='@routes.Assets.at("stylesheets/main.css")'>

   <script type='text/javascript' src='http://www.schillmania.com/projects/soundmanager2/script/soundmanager2.js'></script>


   <div class="hidethis header-cont" id="thishdr">
    <div><p>File generation has started ...</p></div>
    </div>

  <ul id="musicid"></ul>


   <ul id="createdfiles" style="float: right;"></ul>


<form method="post" autocomplete="on" enctype="multipart/form-data">
 @CSRF.formField
      
      <input id="myFile" type="file" name="fileUpload" multiple> <!-- onchange="myFunction()"> -->
       <button>Add Audio</button>
      
    </form>
  
<p id="demo"></p>

<br></br>

<a class="btn" onclick="myFunction2()">Click me to generate</a>




<div class="container" style="margin-top: 100px;">
    <div id="advanced" style="margin-left: 30px;">
      <div><div data-force="5" class="layer title title_xl">Files to be created</div></div>

      <div style="width: 40%; float: left; margin-top: 15px; margin-left: 10px">
        <div class="block__list-title">drag here & order</div>
        <ul id="advanced-1">
           <li></li>
         
        </ul>
      </div>

      <div style="width: 40%; float: left; margin-top: 15px; margin-left: 10px" class="block__list block__list_words">
        <div class="block__list-title">Uploaded files</div>
        <ul id="advanced-2">
          
        </ul>
      </div>

     
   

      <div style="clear: both"></div>
    </div>
  </div>

 <div> CREATED FILES</div>
        <ul id="advanced-3">
           
         
        </ul>
      </div>

<div class="ui360" style="float: left; display: inline; background-image: none;">
                    <div class="sm2-360ui"><canvas class="sm2-canvas hi-dpi" width="100" height="100"></canvas> <span class="sm2-360btn sm2-360btn-default"></span> <div class="sm2-timing">0</div> <div class="sm2-cover"></div></div><a href="http://freshly-ground.com/data/audio/sm2/water-drop.mp3" title="360 demo: Angry Cow Sound" class="norewrite exclude button-exclude inline-exclude sm2_link">Random</a>
                  </div>

<script type="text/javascript">
var ws = new WebSocket("ws://localhost:9000/socket");

function WebSocketStart()
{
    ws.onmessage = function (evt){ 
        var obj = JSON.parse(evt.data);
        if(obj.hasOwnProperty('idstring')){
            $("#advanced-3").append($("<li class='bolding'>").text(obj.idstring.substring(0,4) + "..."));          
        }
    };

    ws.onclose = function(){  
        ws.close();         
    }; 
}

WebSocketStart()


function myFunction2(){

var folder = { 
    music : [] 
};

$( "#advanced-1 > li" ).each(function( index ) {
  if( $( this ).text() != ""){
  folder.music.push( {  "song" :  $( this ).attr( "class" )  });
}
});

  var musicList = JSON.stringify(folder);

  if(folder.music.length != 0){
  ws.send(musicList);
  $("#thishdr").removeClass("hidethis");
  setTimeout(function()   {$("#thishdr").addClass("hidethis")}   ,3000)
  } 

}

</script>

<script>
var el = document.getElementById('advanced-1');
var sortable = new Sortable(el, {
    group:  { name: "advanced", pull: true, put: true },
    sort: true});

var mel = document.getElementById('advanced-2');
var sortable2 = new Sortable(mel, {
    group:  { name: "advanced", pull: 'clone', put: false },
    sort: false});

/*var fel = document.getElementById('advanced-3');
var sortable3 = new Sortable(fel, {
    group:  { name: "advanced", pull: false, put: true },
    sort: false});
*/

</script>


}















 