@import helper._
@()(implicit request: RequestHeader)

@import helper._

@import views.html.helper.CSRF

@main("Welcome to Play") {

<body onload="myFunction()">



 <script type='text/javascript' src='@routes.Assets.at("javascripts/fileupinfo.js")'></script>
  <script type='text/javascript' src='@routes.Assets.at("javascripts/index.js")'></script>
   <script type='text/javascript' src='@routes.Assets.at("javascripts/createdfiles.js")'></script>
   <script type='text/javascript' src='http://rubaxa.github.io/Sortable/Sortable.js'></script>
   <link rel="stylesheet" type="text/css" href='@routes.Assets.at("stylesheets/main.css")'>


   <div class="hidethis header-cont" id="thishdr">
    <div><p>File generation has started ...</p></div>
</div>

  <ul id="musicid"></ul>


   <ul id="createdfiles" style="float: right;"></ul>


<form method="post" autocomplete="on" enctype="multipart/form-data">
 @CSRF.formField
      
      <input id="myFile" type="file" name="fileUpload" multiple onchange="myFunction()">
       <button>Add Audio</button>
      
    </form>
  
<p id="demo"></p>

<br></br>
<br></br>
<br></br>
<a class="btn" onclick="myFunction()">Click me to generate</a>
<br></br>
<br></br>
<br></br>



<div class="container" style="margin-top: 100px;">
    <div id="advanced" style="margin-left: 30px;">
      <div><div data-force="5" class="layer title title_xl">Advanced groups</div></div>

      <div >
        <div class="block__list-title">pull & put</div>
        <ul id="advanced-1">
          <li>Meat</li>
          <li>Potato</li>
          <li>Tea</li>
        </ul>
      </div>

      <div style="width: 25%; float: left; margin-top: 15px; margin-left: 10px" class="block__list block__list_words">
        <div class="block__list-title">only pull (clone) no&nbsp;reordering</div>
        <ul id="advanced-2">
          <li>Sex</li>
          <li>Drugs</li>
          <li>Rock'n'roll</li>
        </ul>
      </div>

      <div style="width: 25%; float: left; margin-top: 15px; margin-left: 10px" class="block__list block__list_words">
        <div class="block__list-title">only put</div>
        <ul id="advanced-3">
          <li>Money</li>
          <li>Force</li>
          <li>Agility</li>
        </ul>
      </div>

      <div style="clear: both"></div>
    </div>
  </div>




<script type="text/javascript">
var ws = new WebSocket("ws://localhost:9000/socket");

function WebSocketTest()
{
    ws.onmessage = function (evt){ 
        var obj = JSON.parse(evt.data);
        if(obj.hasOwnProperty('idstring')){
            $("#createdfiles").append($("<li class='bolding'>").text(obj.idstring));
            $("#createdfiles").append($("<b>").append($("<a href=/serve/" + obj.idstring + " >").text("download ")));
        }
    };

    ws.onclose = function(){  
        ws.close();         
    }; 
}

WebSocketTest()


function myFunction(){
  ws.send("serve")
  $("#thishdr").removeClass("hidethis");
  setTimeout(function()   {$("#thishdr").addClass("hidethis")}   ,3000)
}


 /*window.addEventListener("beforeunload", function (e) {
 
  var confirmationMessage = "\o/";

  (e || window.event).returnValue = confirmationMessage; //Gecko + IE
  ws.close();
  return confirmationMessage;
  console.log(confirmationMessage);                            //Webkit, Safari, Chrome
  
}); */


</script>

<script>
var el = document.getElementById('advanced-1');
var sortable = new Sortable(el, {
    group:  { name: "advanced", pull: true, put: true },
    sort: true});

var mel = document.getElementById('advanced-2');
var sortable2 = new Sortable(mel, {
    group:  { name: "advanced", pull: 'clone', put: false },
    sort: false});

var fel = document.getElementById('advanced-3');
var sortable3 = new Sortable(fel, {
    group:  { name: "advanced", pull: false, put: true },
    sort: false});

</script>


}















 